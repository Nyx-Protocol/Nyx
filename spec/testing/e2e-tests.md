# docs/testing/e2e-tests.md

> **遵守バッジ** : :no_entry: 実装コード非出力 / :no_entry_sign: C/C++依存禁止

## 目次
- [目的](#目的)
- [シナリオ一覧](#シナリオ一覧)
- [非機能観点](#非機能観点)
- [テストデータ戦略](#テストデータ戦略)
- [実行環境](#実行環境)
- [トリアージ基準](#トリアージ基準)
- [レポートとトレーサビリティ](#レポートとトレーサビリティ)
- [関連ドキュメント](#関連ドキュメント)

## 目的
エンドツーエンドでユーザ体験と匿名性を検証し、Nyxプラットフォームの品質保証を行う。

## シナリオ一覧
| シナリオID | 説明 | 成功条件 |
|------------|------|----------|
| E2E-01 | 匿名チャットセッション開始 | 接続成功、P95遅延350ms以下 |
| E2E-02 | モバイルローミング | ネットワーク切替後2秒以内に復帰 |
| E2E-03 | 管理者によるポリシー変更 | 影響セッションが30秒以内に更新 |
| E2E-04 | 監査レポート生成 | レポート生成<5秒、改ざん検証済み |
| E2E-05 | ユーザ通報フロー | 通報が監査ログへ反映 |

## 非機能観点
- **性能**: リアルユーザモニタリングと同期。
- **可用性**: 障害注入後の回復確認。
- **アクセシビリティ**: [ui/accessibility.md](../ui/accessibility.md)に準拠。
- **セキュリティ**: 認証/認可のカバレッジ。

## テストデータ戦略
- 匿名化されたサンプル会話、監査ログデータ。
- データ生成スクリプトはC/C++依存なしのツールで実装。
- データ保全: 実行後に破棄。

## 実行環境
- Pre-production環境。構成は本番と同等（スケール0.5）。
- 外部依存はサンドボックス。
- 証跡収集: 動画、ログ、メトリクス。

## トリアージ基準
| 優先度 | 説明 | 例 |
|--------|------|----|
| Critical | 匿名性侵害、サービス停止 | E2E-01失敗 |
| High | UXや主要機能が利用不可 | E2E-02遅延超過 |
| Medium | 回避策あり | UI軽微問題 |
| Low | 影響限定 | 表示揺らぎ |

## レポートとトレーサビリティ
- レポートは`/reports/e2e/<date>.md`に保存。
- 要件トレース: [requirements.md](../requirements.md)のIDを記録。
- メトリクスは[testing/metrics.md](./metrics.md)へ集約。

## 関連ドキュメント
- [testing/unit-tests.md](./unit-tests.md)
- [testing/integration-tests.md](./integration-tests.md)
- [ui/overview.md](../ui/overview.md)
- [performance/benchmark.md](../performance/benchmark.md)

> **宣言**: 実装コード無し、C/C++依存無し。