# docs/ui/animations.md

> **遵守バッジ** : :no_entry: 実装コード非出力 / :no_entry_sign: C/C++依存禁止

## 目次
- [目的](#目的)
- [モーション原則](#モーション原則)
- [コンポーネント別アニメーション](#コンポーネント別アニメーション)
- [時間・イージング標準](#時間イージング標準)
- [Reduced Motion対応](#reduced-motion対応)
- [性能配慮](#性能配慮)
- [検証手順](#検証手順)
- [関連ドキュメント](#関連ドキュメント)

## 目的
Nyx UIにおけるアニメーション/トランジションの共通規範を定義し、匿名性・信頼性を損なわない自然なモーションを提供する。

## モーション原則
1. **意図の明示**: 状態変化を視覚的に伝え、過剰な演出を避ける。
2. **情報優先**: モーションは情報提示を補強し、遅延を感じさせない。
3. **脆弱情報の安全性**: アニメーション中に匿名性インジケータが隠れない。
4. **コンテキスト保持**: 元の位置と移動先が分かるトランジション。

## コンポーネント別アニメーション
| コンポーネント | アニメーション | 詳細 |
|----------------|----------------|------|
| ダッシュボードカード | フェード+スライドアップ | Duration 160ms, Delay 40ms |
| セッションタイムライン | 連続ライン更新 | RequestAnimationFrame使用（実装側） |
| トースト通知 | スライドイン左右 | 200ms、オーバーシュート無し |
| モーダル | スケール+フェード | 初期スケール0.96→1.0, 220ms |
| ローディングインジケータ | 回転+フェード | 1.2秒サイクル、アクセシブルラベル必須 |

## 時間・イージング標準
- **Duration**: 120ms (最短), 240ms (標準), 400ms (複雑)
- **Easing**: `cubic-bezier(0.25, 0.1, 0.25, 1)` (標準)、`ease-out`はモーダルに使用。
- **Delay**: 最大80ms。チェーンアニメーションは段階的に配置。

## Reduced Motion対応
- OSの"動きを減らす"設定に従ってアニメーションを無効化または最小化。
- 代替としてフェードのみを使用する。
- 設定はユーザープロファイルに保存し[ui/accessibility.md](./accessibility.md)のガイドに従う。

## 性能配慮
- ハードウェアアクセラレーションを前提にしたトランスフォーム利用（CSS transform/opacity）。
- ドロップフレーム監視を行い、1秒あたり2フレーム以上のドロップが継続した場合はReducedモードを推奨。
- UIスレッドをブロックしない非同期データ更新。

## 検証手順
1. アニメーション仕様を[templates/ui-template.md](../templates/ui-template.md)に記録。
2. Storybook等でシナリオを再現し、モーションレビューを実施。
3. [testing/e2e-tests.md](../testing/e2e-tests.md)に記載のアクセシビリティテストでReduced Motionを含むシナリオを確認。

## 関連ドキュメント
- [ui/visual-design.md](./visual-design.md)
- [ui/accessibility.md](./accessibility.md)
- [testing/e2e-tests.md](../testing/e2e-tests.md)

> **宣言**: 実装コード・C/C++依存要素を含まない。