
## 前提条件

- Ubuntu 20.04 LTS以降
- **メモリ**: 最低12GB RAM (推奨: 16GB以上)
  - 2クラスター構成: 8GB RAM でも可
  - 3クラスター構成: 16GB RAM 推奨 (デフォルト)
- **CPU**: 最低4コア (推奨: 6コア以上)
- 最低20GB空きディスク容量 (推奨: 40GB以上)
- インターネット接続 (初回のみ)
- **ネストされた仮想化のサポート** (仮想マシン上で実行する場合)
- Rust 1.70+ (自動インストール)
- Go 1.23+ (自動インストール)

その他の依存関係(Docker、kubectl、kind等)は全て自動でインストールされます。

**重要:** このテストは**NyxNetの匿名化機能(Mix Network)**を検証します。単なるKubernetesの動作確認ではありません。

### 動作確認済み環境

- ✅ **Contabo VPS** (KVM, ネスト仮想化有効)
- ✅ **物理サーバー** (直接実行)
- ✅ **AWS EC2** (metal/bare metalインスタンス)
- ✅ **WSL 2** (Windows 11/10, Docker Desktop使用)
- ⚠️ **Proxmox VM** (デフォルト設定では動作しない - 下記参照)
- ⚠️ **VirtualBox/VMware** (追加設定が必要)
- ❌ **WSL 1** (Docker in Dockerが非サポート)

## クイックスタート

### 基本的な実行方法 (完全自動)

```bash
# リポジトリをクローン
git clone https://github.com/Aqua-218/Nyx.git
cd Nyx

# Docker が起動していることを確認 (重要!)
sudo systemctl status docker
docker info

# 既存のテストクラスタがあれば自動削除されます
# NyxNet Mix Network検証テスト実行 (デフォルト: 3クラスター)
# デフォルト設定: SOCKS5テストはスキップ、Mix Networkテストは実行
bash scripts/k8s-nyx-test.sh

# SOCKS5テストも含めて実行する場合
SKIP_SOCKS5_TESTS=false bash scripts/k8s-nyx-test.sh
```

**🐳 Docker エラーが発生した場合:**
```bash
# Docker デーモンを再起動
sudo systemctl restart docker
docker info  # 正常に動作するか確認

# それでも失敗する場合はシステムを再起動
sudo reboot
```

**⚠️ 重要: kubelet タイムアウトエラーが繰り返し発生する場合**

このエラーは**システムリソース不足**が原因です。以下のいずれかを実行してください:

**方法1: クラスター数を減らす (推奨)**
```bash
# 2クラスターで実行 (メモリ使用量 約40%削減)
CLUSTER_COUNT=2 bash scripts/k8s-nyx-test.sh
```

**方法2: 完全クリーンアップ + 再起動**
```bash
# 完全クリーンアップ
kind delete clusters --all
docker stop $(docker ps -aq) 2>/dev/null || true
docker system prune -af --volumes

# システム再起動 (強く推奨)
sudo reboot

# 再起動後、2クラスターで実行
cd /Nyx
CLUSTER_COUNT=2 bash scripts/k8s-nyx-test.sh
```

**方法3: システムリソースを確認**
```bash
# メモリ確認 (16GB以上推奨)
free -h

# Docker メモリ制限確認
docker info | grep -i memory

# 実行中のコンテナ確認
docker ps -a
```

**これだけです!** スクリプトは以下を全自動で実行します:

1. **既存クラスタの自動クリーンアップ**
   - 既存の`nyx-cluster-*`があれば自動削除して再作成

2. **NyxNetコンポーネントのビルド**
   - nyx-daemon (Rust) - Mix Network制御
   - nyx-http-proxy (Go) - SOCKS5/HTTPプロキシ (オプション)
   - マルチステージDockerイメージ作成

3. **3つのKubernetesクラスター作成**
   - 各クラスターにNyxNet daemonをデプロイ
   - Mix Networkノードとして構成

4. **Mix Network構築**
   - 3-hopルーティング設定
   - Post-Quantum暗号化 (ML-KEM-768 + X25519)
   - Cover Traffic生成

5. **基本動作テスト (デフォルト設定)**
   - ✅ デーモンヘルスチェック (各ノードでnyx-daemonが起動しているか確認)
   - ⏭️ SOCKS5プロキシ経由通信 - **デフォルトでスキップ** (Unix socket IPC実装未完了)
   - 🚧 クラスター間Mix Networkルーティング - **実装中** (テストは実行されるが未実装)
   - 🚧 暗号化・匿名化の検証 - **実装中** (メトリクス収集未実装)
   - 🚧 Cover Traffic検証 - **実装中** (ダミーパケット生成未実装)

6. **レポート生成とクリーンアップ**

**重要な注意事項:**
- **現在の実装状況**: デーモンの起動とヘルスチェックのみ正常に動作します
- **Mix Network機能**: 実装は進行中ですが、まだ完全には動作していません
- **テスト目的**: Kubernetesマルチクラスター環境でのNyxNetデプロイ検証が主な目的です
- **SOCKS5テスト**: Unix socket IPC通信の複雑さのため、デフォルトでスキップされます

### 実行の流れ

1. **NyxNetビルド** (~15-30分, 初回のみ)
   - Rustワークスペースのビルド
   - Goプロキシのビルド
   - Dockerイメージ作成

2. **クラスター作成** (~3-5分)
   - 3つのKindクラスターを作成
   - Dockerイメージをロード

3. **NyxNetデプロイ** (~2-3分)
   - nyx-daemon DaemonSetを各ノードに展開
   - nyx-http-proxy Deploymentを展開
   - Mix Network設定を適用

4. **Mix Network確立** (~1-2分)
   - ノード間のQUIC接続確立
   - 3-hopサーキット構築
   - Post-Quantum鍵交換

5. **基本動作テスト** (~2-3分)
   - ✅ Daemonヘルスチェック (正常動作)
   - ⏭️ SOCKS5プロキシテスト (デフォルトでスキップ)
   - 🚧 クラスター間Mix Networkルーティング (実装中)
   - 🚧 暗号化検証 (実装中)
   - 🚧 Cover Traffic検証 (実装中)

6. **結果レポート生成**
   - JSON/HTML形式で詳細レポート作成
   - Mix Network統計の出力

7. **自動クリーンアップ**
   - テスト完了後、全クラスターを自動削除

### デバッグ用オプション

クラスタを残して手動調査したい場合:

```bash
# クリーンアップをスキップ
SKIP_CLEANUP=true bash scripts/k8s-nyx-test.sh
```

テスト後、クラスタが残ります:
- `nyx-cluster-1`
- `nyx-cluster-2`
- `nyx-cluster-3`

手動でクラスタを削除:

```bash
kind delete clusters nyx-cluster-1 nyx-cluster-2 nyx-cluster-3
```

クラスタ内を調査:

```bash
# Pod状態確認
kubectl --context kind-nyx-cluster-1 get pods -n nyx-test

# nyx-daemonログ確認
kubectl --context kind-nyx-cluster-1 logs -n nyx-test -l app=nyx-daemon

# nyx-proxyログ確認(最新の詳細ログ付き)
kubectl --context kind-nyx-cluster-1 logs -n nyx-test -l app=nyx-proxy --tail=100

# 手動でSOCKS5テスト
kubectl --context kind-nyx-cluster-1 exec -n nyx-test test-client -- \
  curl -v -x socks5h://nyx-proxy.nyx-test.svc.cluster.local:9050 \
  http://example.com
```

### SOCKS5プロトコルレベルのデバッグ

SOCKS5ハンドシェイクの問題を詳細に調査する場合:

```bash
# 最新コードを取得
cd /root/Nyx
git pull

# クラスターを残したまま再テスト(新しい詳細ログ付き)
SKIP_CLEANUP=true bash scripts/k8s-nyx-test.sh

# SOCKS5プロトコルレベルのデバッグを実行
bash scripts/debug-socks5.sh nyx-cluster-1

# 詳細ログの確認
kubectl --context kind-nyx-cluster-1 -n nyx-test logs -l app=nyx-proxy --tail=100
kubectl --context kind-nyx-cluster-1 -n nyx-test logs -l app=nyx-daemon --tail=50
```

**期待されるログエントリ (改善後):**
- `SOCKS5 new connection from X.X.X.X:XXXXX`
- `SOCKS5 [X.X.X.X:XXXXX] starting authentication handshake`
- `SOCKS5 client greeting: version=0x05, nmethods=1, methods=[0]`
- `SOCKS5 selected auth method: 0x00 (no-auth)`
- `SOCKS5 authentication successful`

詳細なデバッグガイドは [docs/SOCKS5_DEBUGGING.md](docs/SOCKS5_DEBUGGING.md) を参照してください。

## ファイル構成

```
NyxNet/
├── Dockerfile.nyx-test               # NyxNetコンポーネント用Dockerfile
├── k8s-nyx-test.toml                 # NyxNet設定ファイル
├── k8s-nyx-manifests.yaml            # NyxNet用Kubernetesマニフェスト
├── k8s-multi-cluster-config-1.yaml   # Cluster 1設定
├── k8s-multi-cluster-config-2.yaml   # Cluster 2設定
├── k8s-multi-cluster-config-3.yaml   # Cluster 3設定
├── scripts/
│   ├── k8s-test-logger.sh            # ログ出力ヘルパー
│   └── k8s-nyx-test.sh               # NyxNet Mix Network検証スクリプト
├── nyx-daemon/                       # Rust daemon (Mix Network制御)
├── nyx-http-proxy/                   # Go proxy (SOCKS5/HTTP)
├── nyx-mix/                          # Mix Network実装
├── nyx-crypto/                       # Post-Quantum暗号
└── test-results/                     # テスト結果出力ディレクトリ
    ├── nyx-test-results-YYYYMMDD-HHMMSS.json
    └── nyx-test-results-YYYYMMDD-HHMMSS.html
```

## 設定詳細

### クラスター構成

各クラスターは以下の構成で作成されます:

| クラスター名 | API Port | Pod Subnet | Service Subnet | NodePort範囲 |
|------------|----------|------------|----------------|-------------|
| nyx-cluster-1 | 6443 | 10.240.0.0/16 | 10.96.0.0/16 | 30080, 30443 |
| nyx-cluster-2 | 6444 | 10.241.0.0/16 | 10.97.0.0/16 | 30081, 30444 |
| nyx-cluster-3 | 6445 | 10.242.0.0/16 | 10.98.0.0/16 | 30082, 30445 |

### ノード構成

各クラスターは以下のノードで構成されます:

- 1 x Control Plane Node
- 2 x Worker Nodes

## テスト内容

### 1. NyxNet Daemonヘルスチェック
各クラスター内のnyx-daemonが正常に起動し、gRPC APIが応答することを確認します。
- gRPCポート(9000)への接続確認
- Prometheusメトリクスの取得
- 結果例: `✅ Daemon healthy: nyx-cluster-1/nyx-daemon-xyz`

### 2. SOCKS5プロキシテスト (**デフォルトでスキップ**)
SOCKS5プロキシを通じて外部サイトへのHTTPS接続を確認します。
- **状態**: 🚧 Unix socket IPC実装の複雑さのため、デフォルトでスキップ
- 有効にする場合: `SKIP_SOCKS5_TESTS=false bash scripts/k8s-nyx-test.sh`
- 計画: Mix Network経由の通信、Post-Quantum暗号化、Sphinx onion routing
- 結果例: `⚠️ Skipping SOCKS5 proxy tests (SKIP_SOCKS5_TESTS=true)`

### 3. クラスター間Mix Networkルーティング (**実装中**)
異なるクラスター間でMix Network経由の通信を確認します。
- **状態**: 🚧 実装中 (テストは実行されるが、Mix Networkロジックは未実装)
- 計画: 3-hopサーキット経由通信、Entry/Middle/Exit Nodeルーティング
- 現状: テストは失敗します (機能未実装)
- 結果例: `❌ Mix routing failed: nyx-cluster-1 → nyx-cluster-2 (exit: 0)`

### 4. 暗号化・匿名化検証 (**実装中**)
Mix Networkが実際に動作していることを検証します。
- **状態**: 🚧 実装中 (Prometheusメトリクス収集機能が未実装)
- 計画: `nyx_mix_packets_sent`, `nyx_mix_hops` などのメトリクス収集
- 現状: メトリクスが取得できません
- 結果例: `⚠️ No Mix Network metrics: nyx-cluster-1`

### 5. Cover Trafficテスト (**実装中**)
トラフィック分析対策のCover Trafficが生成されていることを確認します。
- **状態**: 🚧 実装中 (ダミーパケット生成機能が未実装)
- 計画: Poisson分布に基づくダミーパケット生成、`nyx_cover_traffic_packets` メトリクス
- 現状: Cover trafficが検出されません
- 結果例: `⚠️ No cover traffic detected: nyx-cluster-1`

### テスト結果の例 (現在の実装状況)

```
✅ Daemon health tests completed: 6/6 passed
⚠️ Skipping SOCKS5 proxy tests (SKIP_SOCKS5_TESTS=true)
❌ Mix Network routing tests completed: 0/6 passed
⚠️ Anonymization tests completed: 0/3 passed
⚠️ Cover traffic tests completed: 0/3 passed

Total tests: 18
Passed: 6 (デーモンヘルスチェックのみ)
Failed: 12 (Mix Network機能は実装中)
```

## テスト結果

### JSON出力例

```json
{
  "timestamp": "2025-10-07T12:00:00+09:00",
  "duration_seconds": 245,
  "summary": {
    "total": 12,
    "passed": 11,
    "failed": 1,
    "success_rate": 91
  },
  "test_details": [...]
}
```

### HTML出力

HTMLレポートが生成されます:

- サマリーカード(総テスト数、成功、失敗、実行時間)
- 詳細なテスト結果テーブル
- レスポンシブデザイン

## カスタマイズ

### クラスター数の変更

環境変数 `CLUSTER_COUNT` でクラスター数を指定できます:

```bash
# 2クラスターで実行 (メモリ使用量削減)
CLUSTER_COUNT=2 bash scripts/k8s-nyx-test.sh

# 4クラスターで実行 (十分なリソースがある場合)
CLUSTER_COUNT=4 bash scripts/k8s-nyx-test.sh
```

**注意:** 各クラスターには以下のリソースが必要です:
- **メモリ**: 約4-6GB/クラスター
- **CPU**: 最低2コア/クラスター
- **ディスク**: 約5-10GB/クラスター

**推奨構成:**
- **2クラスター**: 8GB RAM, 4 CPU コア
- **3クラスター**: 16GB RAM, 6 CPU コア (デフォルト)
- **4クラスター**: 24GB RAM, 8 CPU コア

### テスト内容の追加

`test_*`関数を追加することで、独自のテストを実装できます:

```bash
test_custom_feature() {
    log_section "Testing custom feature"
    
    # テストロジック
    
    TOTAL_TESTS=$((TOTAL_TESTS + 1))
    PASSED_TESTS=$((PASSED_TESTS + 1))
    TEST_DETAILS+=("PASS|cluster|target|description")
}
```

## 手動クリーンアップ

テストは自動的にクリーンアップされますが、手動でクリーンアップする場合:

```bash
# すべてのKindクラスターを削除
kind delete cluster --name nyx-cluster-1
kind delete cluster --name nyx-cluster-2
kind delete cluster --name nyx-cluster-3

# またはすべて削除
kind delete clusters --all
```

## トラブルシューティング

### 重要: 失敗時の対処方法

**テストが失敗した場合や、途中でエラーが発生した場合は、以下の手順を実行してください:**

```bash
# 1. プロジェクトディレクトリを完全に削除
cd ~
rm -rf NyxNet

# 2. 再度クローンしてやり直す
git clone https://github.com/Aqua-218/NyxNet.git
cd NyxNet
bash setup-and-test.sh
```

この方法により、中途半端な状態や残存リソースによる問題を回避できます。

### Docker/Kubernetesインストール後の再起動

DockerやKubernetesのインストール後、システムから再起動を求められる場合があります。

**再起動が必要な場合の手順:**

```bash
# 1. システムを再起動
sudo reboot

# 2. 再起動後、プロジェクトディレクトリを削除
cd ~
rm -rf NyxNet

# 3. 再度クローンして実行
git clone https://github.com/Aqua-218/NyxNet.git
cd NyxNet
bash setup-and-test.sh
```

再起動後は必ずクリーンな状態から始めることを推奨します。

### その他のエラー

#### Docker デーモンエラー (「error during connect: EOF」)

**症状:** クラスター作成時に以下のようなエラーが表示される:
```
ERROR: failed to create cluster: failed to get docker info
error during connect: Get "http://%2Fvar%2Frun%2Fdocker.sock/v1.51/info": EOF
```

**原因:**
- Docker デーモンが停止している
- Docker サービスがクラッシュしている
- 過度なクリーンアップ操作でDockerが不安定になった

**解決方法:**

```bash
# 1. Docker サービスの状態を確認
sudo systemctl status docker

# 2. Docker デーモンを再起動
sudo systemctl restart docker

# 3. Docker が正常に動作しているか確認
docker info
docker ps

# 4. 正常に動作することを確認してから再実行
cd /Nyx
CLUSTER_COUNT=2 bash scripts/k8s-nyx-test.sh
```

**それでも解決しない場合:**

```bash
# Docker を完全に停止して再起動
sudo systemctl stop docker
sudo systemctl stop docker.socket
sudo systemctl start docker

# Docker の動作確認
docker run hello-world

# システム全体を再起動 (最も確実)
sudo reboot
```

**WSL 2 (Windows) の場合:**

```powershell
# PowerShell で Docker Desktop を再起動
wsl --shutdown
# Docker Desktop を手動で再起動

# または WSL を完全に再起動
Restart-Service -Name docker
```

#### Kubelet タイムアウトエラー (「timed out waiting for the condition」)

**症状:** クラスター作成中に kubelet が起動せず、以下のようなエラーが表示される:
```
[wait-control-plane] Waiting for the kubelet to boot up the control plane...
[kubelet-check] It seems like the kubelet isn't running or healthy.
Unfortunately, an error has occurred:
    timed out waiting for the condition
```

**原因:**
- システムリソース不足 (メモリ/CPU)
- Docker コンテナの競合状態
- cgroup 制限に達している

**解決方法 1: 完全クリーンアップ (推奨)**

```bash
# すべての Kind クラスターを削除
kind delete clusters --all

# Docker リソースをクリーンアップ
docker stop $(docker ps -aq) 2>/dev/null || true
docker rm $(docker ps -aq) 2>/dev/null || true
docker system prune -af --volumes

# システムを再起動 (強く推奨)
sudo reboot

# 再起動後
cd /Nyx
bash scripts/k8s-nyx-test.sh
```

**解決方法 2: クラスター数を減らす (最も簡単)**

```bash
# 2クラスターで実行 (メモリ使用量 約40%削減)
CLUSTER_COUNT=2 bash scripts/k8s-nyx-test.sh
```

このエラーが**繰り返し発生する場合は、システムリソースが不足しています**。
必ず2クラスターで実行するか、より多くのメモリを搭載したマシンで実行してください。

**解決方法 3: プロジェクトを再クローン**

```bash
cd /
rm -rf /Nyx
git clone https://github.com/Aqua-218/Nyx.git
cd Nyx
bash scripts/k8s-nyx-test.sh
```

#### 依存関係のインストールに失敗

```bash
# システムパッケージを更新
sudo apt-get update
sudo apt-get upgrade

# プロジェクトを削除して再クローン
cd ~
rm -rf NyxNet
git clone https://github.com/Aqua-218/NyxNet.git
cd NyxNet
bash setup-and-test.sh
```

#### Docker権限エラー

```bash
# dockerグループに追加後、ログアウト/ログインが必要な場合があります
sudo usermod -aG docker $USER
# ログアウトして再ログイン、または
newgrp docker

# 権限が正しく設定されているか確認
docker ps
```

**rootユーザーで実行している場合:** 権限エラーは発生しませんが、Docker デーモンが起動しているか確認してください:

```bash
# Docker サービスの確認
sudo systemctl status docker

# 停止している場合は起動
sudo systemctl start docker
```

#### ポート競合

他のサービスがポート6443-6445を使用している場合、設定ファイルのapiServerPortを変更してください。

#### メモリ不足

**最低16GB RAM推奨** (3クラスター構成の場合)。8GB以下の環境では2クラスターで実行してください:

```bash
# 2クラスターで実行 (8GB RAMでも動作可能)
CLUSTER_COUNT=2 bash scripts/k8s-nyx-test.sh
```

**メモリ使用量の目安:**
- **2クラスター**: 約8-10GB RAM
- **3クラスター**: 約12-18GB RAM (デフォルト)
- **4クラスター**: 約20-24GB RAM

**現在のメモリ状況を確認:**
```bash
# 利用可能なメモリを確認
free -h

# Dockerのメモリ使用状況を確認
docker stats --no-stream
```

#### "Too many open files" エラー

システムのファイル監視制限に達した場合、スクリプトが自動で調整しますが、手動で設定する場合：

```bash
# 一時的な対応
sudo sysctl fs.inotify.max_user_watches=524288
sudo sysctl fs.inotify.max_user_instances=512

# 永続化
echo "fs.inotify.max_user_watches=524288" | sudo tee -a /etc/sysctl.conf
echo "fs.inotify.max_user_instances=512" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
```

#### "Invalid ELF header magic" エラー (Proxmox/仮想化環境)

**症状:** クラスター作成時に「Invalid ELF header magic: != JELF」エラーが発生

**原因:** ネストされた仮想化が無効になっているため、Kind(Kubernetes in Docker)が正常に動作しません。

**確認方法:**

```bash
# 仮想化サポートを確認
egrep -c '(vmx|svm)' /proc/cpuinfo
# 結果が 0 の場合、仮想化機能が利用できません

# CPUフラグを確認
lscpu | grep Virtualization
```

**Proxmox環境での解決方法:**

1. **Proxmox Web UIでVMの設定を変更:**
   - VM → Hardware → Processors
   - **CPU type**: `kvm64` または `x86-64-v2-AES` から `host` に変更
   - これによりホストのCPU機能がゲストに渡されます

2. **Proxmoxホスト側でネストされた仮想化を有効化:**

   ```bash
   # Proxmoxホストにログイン (VMではなくホスト側)
   
   # AMD CPUの場合
   cat /sys/module/kvm_amd/parameters/nested
   # Intel CPUの場合
   cat /sys/module/kvm_intel/parameters/nested
   
   # Y なら既に有効、N なら以下を実行
   
   # AMD CPUの場合
   echo "options kvm_amd nested=1" > /etc/modprobe.d/kvm-amd.conf
   modprobe -r kvm_amd
   modprobe kvm_amd
   
   # Intel CPUの場合
   echo "options kvm_intel nested=1" > /etc/modprobe.d/kvm-intel.conf
   modprobe -r kvm_intel
   modprobe kvm_intel
   ```

3. **VMを再起動:**
   ```bash
   # VM内で
   sudo reboot
   ```

4. **再度テスト実行:**
   ```bash
   cd ~/NyxNet
   bash setup-and-test.sh
   ```

**VirtualBox/VMware環境での解決方法:**

- **VirtualBox**: Settings → System → Processor → Enable "Enable Nested VT-x/AMD-V"
- **VMware**: VM Settings → Processors → Virtualization Engine → "Virtualize Intel VT-x/EPT or AMD-V/RVI"

**WSL (Windows Subsystem for Linux) 環境:**

WSL 2を使用している場合は追加設定なしで動作します:

```bash
# WSLバージョン確認 (Windows PowerShellで実行)
wsl --list --verbose
# VERSION が 2 なら OK

# WSL 1の場合はWSL 2にアップグレード
wsl --set-version Ubuntu 2
```

**WSL 2での実行手順:**

```bash
# WSL 2 Ubuntu内で実行
cd ~
git clone https://github.com/Aqua-218/NyxNet.git
cd NyxNet
bash setup-and-test.sh
```

注意: Docker DesktopがインストールされていてWSL 2統合が有効になっている必要があります。

**それでも解決しない場合:**

物理サーバー、WSL 2、またはContabo/AWS等のネスト仮想化対応VPSでの実行を推奨します。

## パフォーマンス目安

- **初回実行 (ビルド含む): 約30-50分**
  - Rustワークスペースビルド: 15-30分
  - Dockerイメージビルド: 5-10分
  - クラスター作成・デプロイ: 5-10分
  - テスト実行: 5分

- **2回目以降 (ビルド済み): 約10-15分**
  - クラスター作成・デプロイ: 5-10分
  - テスト実行: 5分

- **Mix Networkレイテンシ**: +100-200ms (3-hop overhead)
  - 直接通信: 5-10ms
  - Mix Network経由: 105-210ms
  - Cover Trafficオーバーヘッド: ~5-10%

## 注意事項

### 現在の実装状況

**このテストスイートは、NyxNetのKubernetesマルチクラスター環境でのデプロイを検証します:**

✅ **現在動作している機能:**
- Kubernetesマルチクラスター環境の自動構築 (Kind使用)
- NyxNet daemonのDaemonSetデプロイ
- デーモンヘルスチェック (gRPC/Unix socket確認)
- テストレポート生成 (JSON/HTML)

🚧 **実装中の機能:**
- Post-Quantum暗号化 (ML-KEM-768 + X25519)
- 3-hop Mix Networkルーティング
- Sphinx onion routing (多層暗号化)
- SOCKS5/HTTPプロキシ経由の匿名通信
- Cover Traffic生成 (トラフィック分析対策)
- Prometheusメトリクスによる統計

**テストの主な目的:**
- Kubernetesマルチクラスター環境でのNyxNetデプロイの検証
- デーモンプロセスの正常起動確認
- 将来のMix Network機能実装のためのテストフレームワーク構築

### その他の注意点

- このフレームワークはMix Networkの動作検証用です
- 本番環境での使用は想定していません
- 初回ビルドは30-50分程度かかります
- テスト実行後はリソースが自動的にクリーンアップされます
- 問題が発生した場合は、プロジェクトディレクトリを削除して再クローンすることを推奨します

## ライセンス

このプロジェクトは、親プロジェクト(Nyx)のライセンスに従います。
